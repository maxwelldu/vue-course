<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
  </head>
  <body>
    <div id="app">
      <p>{{ count }}</p>
      <p>
        <button @click="increment">+</button>
        <button @click="decrement">-</button>
      </p>
    </div>
    <script src="vue.js" charset="utf-8"></script>
    <script src="vuex.js" charset="utf-8"></script>
    <script type="text/javascript">
      //统一管理所有的状态
      const store = new Vuex.Store({
        //有哪些状态
        state: {
          count: 0
        },
        //添加了action
        actions: {
          increment: function(store) {
            // console.log(arguments);
            store.commit('increment');
          },
          decrement: function({commit}) {
            commit('decrement');
          }
        },
        //改变，可以通过调用这个改变的方法来修改state的值
        mutations: {
          //添加方法
          increment: function(state) {
            //修改状态里面的count
            state.count++
          },
          decrement: function(state) {
            state.count--;
          }
        }
      })

      new Vue({
        el: '#app',
        computed: {
          //根组件里面使用整个store里面的state里面的count值，当这个值发生改变，这里会自动更新
          //store里面的state值在当前组件中读取
          count: function() {
            return store.state.count
          }
        },
        methods: {
          //通过在当前组件中触发事件来修改state的数据，修改的时候只能够提交store里面的mutation, 通过store.commit(mutation的名称)
          increment: function() {
            store.dispatch('increment')
          },
          decrement: function() {
            store.dispatch('decrement')
          }
        }
      })
    </script>
  </body>
</html>
